## I/O Tester utility

The I/O Tester utility, `io_tester` generates a user-defined I/O pattern
spanning one of multiple shards that is designed to simulate the I/O behavior
of a complex Seastar application.

# Running I/O tester:

I/O tester takes the same options as Seastar, and those options may be used
to test the behavior of I/O under the circumnstances established by those
options. For instance, one may adjust the `--task-quota-ms` option to see
if that affects higher percentile latencies.

Aside from the usual seastar options, I/O tester accepts the following options:

* `duration`: for how long to run the evaluation,
* `directory`: a directory where to run the evaluation,
* `conf`: the path to a YAML file describing the evaluation.

# Describing the evaluation

The evaluation is described in a YAML file that describes multiple classes.
Each class spans jobs of similar characteristics in different shards. The YAML
file contains a list of maps. Each element of the list is a class.

For example:

```
- name: big_writes
  type: seqread
  shards: all
  shard_info:
  - parallelism: 10
    reqsize_kb: 256
    shares: 10
    think_time_us: 0
```

* `name`: mandatory property, a string that identifies jobs of this class
* `type`: mandatory property, one of seqread, seqwrite, randread, randwrite, append
* `shards`: mandatory property, either the string "all" or a list of shards where this class should place jobs.

The properties under `shard_info` represent properties of the job that will
be replicated to each shard. All properties under `shard_info` are optional, and in case not specified, defaults are used.

* `parallelism`: the amount of parallel requests this job will generate
* `reqsize_kb` : the size of requests generated by this job, in kB
* `shares` : how many shares requests in this job will have in the I/O scheduler
* `think_time_ms`: how long to wait before submitting another request in this job, once one finishes.

# Example output

```
      Creating initial files...
      Starting evaluation...
      Shard  0
       Class 0(big_writes: 10 shares, 262144-byte SEQ WRITE, 10 concurrent requests, NO think time)
        Throughput         :   436556 KB/s
        Lat average        :     5847 usec
        Lat quantile=  0.5 :     2678 usec
        Lat quantile= 0.95 :    13029 usec
        Lat quantile= 0.99 :    20835 usec
        Lat quantile=0.999 :   246090 usec
        Lat max            :   450785 usec
```

# Future

Some ideas for extending I/O tester:

* allow properties like think time, request size, etc, to be specified as distributions instead of a fixed number
* allow classes to have class-wide properties. For instance, we could define a class with parallelism of 100, and distribute those 100 requests over all shards in which this class is placed
* support other types, like delete, fsync, etc.

